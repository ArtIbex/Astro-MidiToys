---

---

<body>
    <h1> MIDI Debugging Page </h1>
    <script>
        import { MIDIInputModule } from "./js/MIDIInputModule";
        import { InputManager } from "./js/InputManager";
        // import { NoteSquare } from "./js/NoteSquare";
        import { SquareKeyboard } from "./js/SquareKeyboard";
        import { KeyboardInputModule } from "./js/KeyboardInputModule";

        let inputManager = new InputManager() as InputManager;
        let keyboardReader = new KeyboardInputModule(inputManager);
        let inputReader;
        // let BPM = 0;
        
        if (typeof window !== 'undefined') {
            // keyboardReader = new KeyboardInputModule(inputManager) as KeyboardInputModule;
            inputReader = new MIDIInputModule(inputManager) as MIDIInputModule;

            setInterval(() => {
                let deviceData = "Connected MIDI Devices: " + inputReader.GetMIDIInputs() + "<br>  BPM: " + inputManager.GetBPM();
                document.getElementById("DeviceAndBPM").innerHTML = deviceData;
            }, 100);

            const canvasReverences = [
            document.getElementById("cCanvas") as HTMLCanvasElement,
            document.getElementById("c#Canvas") as HTMLCanvasElement,
            document.getElementById("dCanvas") as HTMLCanvasElement,
            document.getElementById("d#Canvas") as HTMLCanvasElement,
            document.getElementById("eCanvas") as HTMLCanvasElement,
            document.getElementById("fCanvas") as HTMLCanvasElement,
            document.getElementById("f#Canvas") as HTMLCanvasElement,
            document.getElementById("gCanvas") as HTMLCanvasElement,
            document.getElementById("g#Canvas") as HTMLCanvasElement,
            document.getElementById("aCanvas") as HTMLCanvasElement,
            document.getElementById("a#Canvas") as HTMLCanvasElement,
            document.getElementById("bCanvas") as HTMLCanvasElement
            ]

            const keyboard = new SquareKeyboard(canvasReverences, inputManager as InputManager, 1);

            //Notes that are playe on channel 1 - 4
            setInterval(() => {
                keyboard.GetMIDIInput();

                document.getElementById("CH1Keys").innerHTML = "Channel 1: " + inputManager.GetHoldingKeys(1) + " Velocity: " + inputManager.GetVelocityHoldingKeys(1);
                document.getElementById("CH2Keys").innerHTML = "Channel 2: " + inputManager.GetHoldingKeys(2) + " Velocity: " + inputManager.GetVelocityHoldingKeys(2);
                document.getElementById("CH3Keys").innerHTML = "Channel 3: " + inputManager.GetHoldingKeys(3) + " Velocity: " + inputManager.GetVelocityHoldingKeys(3);
                document.getElementById("CH4Keys").innerHTML = "Channel 4: " + inputManager.GetHoldingKeys(4) + " Velocity: " + inputManager.GetVelocityHoldingKeys(4);
            }, 1);
        
            // Set the fill style to a color
            // Draw a filled rectangle with the fillRect method
            // The parameters are x, y, width and height
        }
        
        // console.log("END Javascript code");
        </script>
        <h2 id="DeviceAndBPM">No device found</h2>

        <h2 id="CH1Keys"></h2>
        <h2 id="CH2Keys"></h2>
        <h2 id="CH3Keys"></h2>
        <h2 id="CH4Keys"></h2>
        <br>

        <h2>(C,D,E,F,G,A,B)</h2>
        <canvas id="cCanvas" width="200" height="200"></canvas>
        <canvas id="dCanvas" width="200" height="200"></canvas>
        <canvas id="eCanvas" width="200" height="200"></canvas>
        <canvas id="fCanvas" width="200" height="200"></canvas>
        <canvas id="gCanvas" width="200" height="200"></canvas>
        <canvas id="aCanvas" width="200" height="200"></canvas>
        <canvas id="bCanvas" width="200" height="200"></canvas>
       
        <br>


        <h2>(C#,D#,F#,G#,A#)</h2>
        <canvas id="c#Canvas" width="200" height="200"></canvas>
        <canvas id="d#Canvas" width="200" height="200"></canvas>
        <canvas id="f#Canvas" width="200" height="200"></canvas>
        <canvas id="g#Canvas" width="200" height="200"></canvas>
        <canvas id="a#Canvas" width="200" height="200"></canvas>

</body>